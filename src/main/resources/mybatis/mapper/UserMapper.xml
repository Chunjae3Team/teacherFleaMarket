<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.UserMapper">

    <!--신수진-->



    <!--최경락-->



    <!--최영주-->



    <!--최재혁-->
    <insert id="createUser" parameterType="dto.UserDTO">
        INSERT
        INTO user(user_id, user_nick, user_pwd, user_name, user_cp, user_email, user_addr, user_daddr, user_school, ofile, sfile)
        VALUES(#{userId}, #{user_nick}, #{userPwd}, #{userName}, #{userCp}, #{userEmail}, #{userAddr}, #{userDaddr}, #{userSchool}, #{ofile}, #{sfile})
    </insert>

    <select id="authenticateUser" parameterType="map">
        select count (*)
        from user
        where user_id = #{user_id} AND user_pwd = #{user_pwd}
    </select>

    <select id="authenticateFind" parameterType="map">
        select user_id
        from user
        where user_name = #{user_name} AND user_email = #{user_email}
        limit 1
    </select>

    <select id="authenticateFindPass" parameterType="map">
        select count (*)
        from user
        where user_id = #{user_id} AND user_email = #{user_email} AND user_cp = #{user_cp}
    </select>

    <update id="updatePass" parameterType="dto.UserDTO">
        update user
        set user_pwd = #{userPwd}
        where user_id = #{userId}
    </update>

    <update id="updateUserInfo" parameterType="dto.UserDTO">
        update user
        set user_pwd = #{userPwd}, user_name = #{userName}, user_cp = #{userCp}, user_email = #{userEmail}, user_addr = #{userAddr}, user_daddr = #{userDaddr}
        where user_id = #{userId}
    </update>


    <select id="authenticateStatus" parameterType="String">
        select user_status
        from user
        where user_id = #{userId}
    </select>

    <select id="idCheck" parameterType="String">
        select count (*)
        from user
        where user_id = #{userId}
    </select>

    <select id="authenticateAdmin" parameterType="String">
        select user_grade
        from user
        where user_id = #{userId}
    </select>




</mapper>